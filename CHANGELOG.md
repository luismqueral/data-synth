# Changelog

## 2025-11-11
- added dataset source link and cache-busting for live data - displays "View dataset source ‚Üí" link below dropdown when API/dataset selected (opens in new tab), link auto-hides when pasting/dropping custom data, added timestamp parameter to all API fetches (_t=Date.now()) to prevent browser caching and ensure fresh data on each selection, set cache: 'no-cache' header for all requests, guarantees live data is actually live
- improved dataset compatibility warnings - added console warnings when no numeric paths found in dataset (string-only or deeply nested data), logs all detected paths with types for debugging, shows orange warning in UI: "‚ö†Ô∏è Warning: No numeric fields found in this dataset", helps identify incompatible data sources before attempting playback
- streamlined dataset list to only verified working sources - reduced from 30+ to 10 ultra-reliable datasets, removed all CORS-problematic APIs (weather forecasts, REST countries, solar system bodies, Pok√©API, random users, dog breeds all had issues), kept only battle-tested sources: USGS earthquakes (4 feeds including archive), Baltimore housing permits (local file), NASA exoplanets CSV (local file), ISS location and astronauts (Open-Notify API), all selected datasets guaranteed to load and show D3 visualization with numeric fields, simplified labels and removed redundant categories
- reduced main content container max-width for better focus - decreased from 1400px to 1100px to create more compact, focused interface, prevents interface from stretching too wide on large screens, keeps all controls and visualizations within comfortable viewing distance, more readable proportions while maintaining responsive design for smaller screens
- enforced rhythmic variation to prevent monotonous timing - added automatic ¬±20% random variation to noteSpacing when not mapped to data, prevents straight metronomic timing (boring), creates natural humanized rhythm even without data mapping, added console warnings when noteSpacing isn't mapped after smart mapping (encourages mapping for better patterns), includes commented alternative for sine-wave-based accelerando/ritardando effects, ensures every sonification has interesting rhythmic character
- massively expanded dataset library with 30+ data sources across 9 categories - added Weather & Climate (NOAA alerts, NYC/London forecasts), Finance & Markets (Coinbase crypto rates, Bitcoin mining pools), Ocean & Marine (NOAA tide levels for NYC/SF), Science & Research (GitHub top repos and events), Music & Media (iTunes song searches), Demographics & Social (REST Countries API with 250+ countries by region), Internet & Tech (Pokemon, jokes APIs), Random & Fun (random users, dog breeds, activity suggestions), updated existing Space category with astronauts in space and solar system bodies database, kept original Earth Science and Urban datasets, mix of real-time APIs and static datasets for maximum variety
- added experimental waveform types beyond basic oscillators - expanded waveform options into three categories (Classic: sine/square/sawtooth/triangle, Noise: white/pink/brown noise generators, Synthesis: FM synthesis/additive harmonics/pulse width modulation), implemented createCustomOscillator() and createNoiseBuffer() functions for custom sound generation, white noise uses random values, pink noise uses 1/f filtering for natural sound, brown noise uses 1/f¬≤ for deep rumble, FM synthesis modulates carrier with 2.5x harmonic ratio for metallic timbres, additive synthesis creates harmonic series (fundamental + 2nd/3rd/4th harmonics with decreasing amplitude), PWM uses square wave base, organized UI with visual separators and category labels for easy browsing
- added master volume control to global settings - placed at top of settings drawer with slider (0-1 range, default 0.2), replaced hardcoded safe volume with master volume slider value, real-time volume display shows decimal and percentage (e.g., "0.2 (20%)"), allows user to control overall loudness without safety concerns since default is conservative
- added comprehensive data flow documentation - documented entire pipeline from data loading through playback in 6 stages (loading/parsing, path extraction/validation, visualization setup, mapping, playback/sonification, D3 updates), added inline comments explaining critical functions and their purposes, documented safeId() conversion process for CSS-safe IDs, explains why dots in paths cause D3 selector issues
- fixed D3 visualization not showing values during playback - paths with dots (like "properties.mag") created invalid CSS selectors causing getElementById to fail, added safeId() helper to convert dots to underscores ("properties_mag"), updated createNodes() to generate CSS-safe IDs while preserving original paths for display, switched from d3.select() to direct DOM manipulation (getElementById + textContent) for better performance, added debug logging to show node ID mappings and catch missing DOM elements
- improved path detection with coverage analysis - extractPaths now samples up to 20 items (was 1) to verify field existence across dataset, filters out sparse paths that exist in <10% of items to avoid displaying mostly-null fields, logs coverage percentage for each detected path showing data quality, added depth limit of 5 levels to prevent infinite recursion on circular references, logs filtered sparse paths to console for debugging
- enhanced getValueByPath error handling - added null/undefined checks before accessing properties, wrapped in try/catch to prevent crashes on malformed data, logs warnings when path access fails with details about the error
- fixed critical data loading bug causing visualization to show "--" instead of values - corrected adaptive normalization to use processedData instead of raw data (line 687), this was causing mismatch between detected paths and actual data structure especially for nested data like GeoJSON, added comprehensive console logging to debug data structure issues (logs first item sample, all numeric paths, item structure during playback), added warning logs for missing data paths to identify mismatch issues, reset debug flags on each playback start for clean logging
- fixed Play Data button jitter when toggling between states - changed from min-width: 200px to fixed width: 240px so button maintains same size when text changes from "Play Data" to "Stop", prevents layout shift during playback
- set consistent height for all control buttons - added explicit 64px height to Play Data button, ITEM counter, and Randomize Patch button to ensure uniform visual alignment, prevents different font sizes and content structures from creating uneven heights in the control bar
- redesigned ITEM counter as card in center of controls - converted ITEM from simple text to card component with light gray background (#f5f5f5), light border, same 16px/24px padding as buttons for matching height, 120px min-width, moved to middle position between Play and Randomize buttons, stacked layout with "ITEM" label above value, increased value font to 16px for better readability
- increased Randomize Patch button size to balance with Play button - enlarged font from 14px to 16px, added 180px min-width (Play is 200px), uses same padding (16px 24px) as Play button for equal height, button now feels more substantial next to large Play button while maintaining secondary visual weight through white background vs Play's black
- replaced all mock/sample datasets with real data sources in dropdown - removed housing-sample.json, exoplanets-sample.json, earthquakes-sample.json, weather-sample.json, and sample_permits.geojson, organized dropdown into three categories (Earth Science, Urban Data, Space & Astronomy) with emoji icons for visual scanning, added real-time API endpoints including USGS earthquake feeds (past week and past day with live updates), NASA Near Earth Objects API for daily asteroid data, and ISS location tracker for real-time orbital position, kept full local datasets (earthquakes-week.geojson with 1600+ events, Housing_and_Building_Permits_2019-Present.geojson with 265K+ permits, exoplanets.csv with 6000+ planets), changed default auto-load from sample file to live USGS earthquake feed for immediate real-time data experience
- updated datasets/README.md to reflect real-time data capabilities - added new sections for ISS tracking and Near Earth Objects, restructured dataset descriptions to emphasize live/real-time updates, changed comparison table from file sizes to update frequencies (every minute for earthquakes, every second for ISS, daily for NEO), updated Quick Start Guide to prioritize real-time sources over static files, revised File Structure section to document API endpoints, updated Examples to Try section with four new sonification ideas featuring live data (Live Earth Symphony, ISS Orbit Tracker, Near Earth Objects, Exoplanet Radio)

## 2025-11-11
- fixed control buttons alignment to prevent wrapping - changed container from text-center (tc) to flexbox (flex items-center justify-center) to ensure all controls stay on same line, prevents ITEM counter from wrapping to new line on certain screen sizes, proper flexbox alignment keeps Play/Randomize/ITEM horizontally aligned and centered
- reorganized control buttons into single centered row - moved Randomize Patch button from Patch View header to main controls (appears as secondary button next to Play Data), all controls now on one row: [Play Data] [Randomize Patch] ITEM, removed duplicate Randomize Patch from patch view header, simplified Patch View to just header without action buttons
- added max-width constraint to main container - set 1400px max-width with auto margins for centered layout on large screens, prevents interface from stretching too wide on ultrawide monitors, maintains readable proportions while staying responsive on smaller screens
- simplified playback controls to single toggle button - removed separate Stop button, Play Data button now toggles between "‚ñ∂ Play Data" and "‚èπ Stop" states, clicking while playing immediately stops playback, removed pause functionality for simpler on/off control, ITEM counter moved to right of button, cleaner single-button interface
- added window resize handler for D3 patch visualization - patch now redraws automatically when browser window is resized with 250ms debounce, column headers reposition dynamically to stay centered above data/audio columns, ensures node layout stays properly aligned regardless of viewport width changes
- enlarged play button and updated text - increased Play Data button to 200px min-width with 16px/24px padding and 24px font size (was 140px/pa3/f4), made play icon larger (24px), button text now says "Play Data" instead of just "Play", moved ITEM counter to the right of Stop button for better layout flow
- repositioned column headers to dynamically center above node columns - headers now use absolute positioning with transform: translateX(-50%) for perfect centering, left/right positions update automatically when createNodes() calculates column positions based on SVG width, headers track node positions instead of fixed padding, renamed to "Data Fields" and "Audio Parameters" for clarity
- made interface responsive for mobile and tablet devices - added viewport meta tag for proper mobile rendering, created three responsive breakpoints (mobile <768px, tablet 769-1200px, desktop >1200px), mobile layout reduces padding/font sizes/button sizes, dropdown width adjusts (100% mobile, 500px tablet, 600px desktop), D3 node view adapts margins (40px mobile vs 100px desktop) and node sizing (90x32px mobile vs 110x36px desktop), patch SVG gets horizontal scroll on mobile to preserve node layout integrity
- increased D3 node spacing and size for better readability - increased vertical spacing from 45px to 50px between nodes for more breathing room, increased node dimensions from 100x32px to 110x36px for more internal padding and easier clicking, nodes now more comfortable to read and interact with
- brought D3 node columns 50% closer together - changed column gap calculation from 50% of available width to 25% (columnGap = width * 0.25 instead of 0.5), nodes now positioned much closer to center of patch view for tighter more focused layout, added console logging to show exact positioning values for debugging
- updated branding to "data 2 sound" with decorative blackletter header - changed heading font to Lucida Blackletter (serif fallback) with font-weight: normal (not bold) and larger f1 size, removed hyphens from name (was "data-2-sound"), updated title tag and console logs to match, added tagline below header "Turn any dataset into sound. Map data fields to audio parameters and hear patterns emerge." with GitHub link to github.com/luismqueral/data-2-sound, centered 600px max-width description text
- centered and simplified playback controls - centered Play/Stop buttons and ITEM counter, added min-width: 140px to Play button to prevent size changes, simplified button text to just "Play" (was "Play Data"/"Pause"/"Resume"), removed text content changes during play/pause (only icon changes now), consolidated ITEM label to inline display with single line layout
- implemented drag-and-drop file upload with visual feedback - added drop zone overlay that appears when dragging files over window, accepts JSON/CSV/GeoJSON files, shows dashed border that highlights when hovering, automatically loads and parses dropped files, clears dropdown selection when custom file is loaded, added global paste support so users can paste data anywhere on page (not just in textarea)
- redesigned data selection interface for simplicity - centered and widened dataset dropdown to 600px (from 300px), removed "Dataset:" label for cleaner look, added helpful text below dropdown "Copy/paste or drag-and-drop dataset to upload your own", centered parse status message, dropdown now primary visual element on page
- prioritized noteSpacing parameter for more interesting rhythmic output by default - moved noteSpacing to first position in critical parameter tier (before frequency/duration) in smart mapping algorithm, expanded rhythmic range from 150-800ms to 80-1200ms for more dramatic variation (rapid-fire to spacious gaps), added special curve handling that favors exponential curves for accelerando/ritardando feel, ensured noteSpacing always gets mapped in randomizeMappings function (100% mapping rate vs 70% for other params with 60% bias toward exponential curves), updated parameter label to "Note Spacing (ms) - Rhythm" and changed default from 500ms to 300ms for more active baseline tempo, added special console logging with üéµ emoji to highlight when rhythm is being mapped
- removed all hardcoded datasets and switched to file loading from /datasets folder - eliminated 400+ lines of hardcoded JSON/CSV template data, updated dropdown to reference actual file paths (datasets/housing-sample.json, datasets/exoplanets-sample.json, datasets/exoplanets.csv), implemented async fetch() loader with support for JSON/CSV/GeoJSON formats, added loading status indicator and error handling, prettifies JSON with 2-space indentation after loading, fixes issue where datasets only showed 5 items (were using tiny hardcoded samples instead of real data files)
- adjusted column positioning - moved node columns closer together (130px margins instead of 150px), updated header alignment to 90px padding for better visual balance with tighter column spacing
- redesigned patch view color scheme - changed container background to pale yellow (#fffef0) for warmer tone, switched node backgrounds to pure white (#fff) for better contrast, increased node dimensions to 100x32px (from 80x24px) for more padding and breathing room, adjusted vertical spacing to 45px (from 35px) to accommodate larger nodes
- refined D3 node styling - added subtle light gray background (#fafafa) to all node rectangles for better visual definition, changed numeric value text from bold (600) to normal weight (400) for cleaner appearance, keeps labels bold but makes values lighter and less prominent
- made audio output section fixed to bottom of viewport - audio visualizer now stays visible at bottom with black top border regardless of scroll position, added z-index 1000 for proper layering, added 140px bottom padding spacer to prevent content overlap, ensures audio feedback is always visible during playback
- added shuffle emoji (üîÄ) to Randomize Patch button for visual clarity
- tightened node column spacing further - moved columns even closer together (150px margins) for more compact patch view, adjusted header alignment to match new column positions (110px padding)
- improved D3 node view visualization - added column headers "Table Headers" and "Audio Processing Effects" above node columns in uppercase monospace style, moved columns closer together (120px margins instead of 80px) for more compact patch view, fixed value display formatting to show actual dataset values during playback (handles very small numbers with exponential notation, truncates long strings to 12 chars), improved null/undefined handling to always show meaningful values or '--' placeholder
- added three new rich datasets to json-mapper-v2.html dropdown - earthquakes (USGS, 26+ fields including magnitude, depth, seismic network metrics), exoplanets (NASA, 22 key fields from 683 total including planet size/mass/temperature, star properties, distance), weather (Open-Meteo, 15 hourly parameters including temperature, precipitation, wind, pressure), all three datasets downloaded to datasets/ folder with sample JSON files and comprehensive markdown guides
- created EARTHQUAKES_DATA_GUIDE.md with complete documentation - 18 key numeric fields explained, sonification mapping suggestions for four different approaches (seismic drama, network quality, geographic journey, tsunami alert), field ranges and descriptions, download instructions for live data updates
- created EXOPLANETS_DATA_GUIDE.md covering 683-column dataset - documented 22 most useful fields for sonification, five sonification strategies (cosmic tour, habitability explorer, discovery timeline, stellar family portrait, physical extremes), data ranges with notable examples, python script for filtering and sampling
- created WEATHER_DATA_GUIDE.md with 15 meteorological parameters - explained temperature/humidity/precipitation/wind/pressure fields, five sonification approaches (daily journey, storm detector, seasonal comparison, comfort index, multi-layer atmosphere), WMO weather codes, instructions for getting custom location data
- created master datasets/README.md comparing all four datasets - quick start guide, dataset comparison table, sonification strategies for each, criteria for finding additional datasets, file structure overview, tips for success
- downloaded actual data files - earthquakes-week.geojson (1616 events, 1.1MB), exoplanets.csv (5500+ planets, 683 columns, 73MB), weather-sample.json (168 hourly measurements, 30KB), created earthquake-sample.json and exoplanets-sample.json for easier testing
- separated visualizer into its own section below patch view - created dedicated "Audio Output" section with same styling as other containers (light gray background #f5f5f5, 20px padding, border), visualizer now 100% width in main container flush with page padding, appears as independent section after patch view for cleaner separation of concerns, removed from patch view container entirely
- reorganized patch view layout - moved visualizer from top to bottom of patch view to prioritize node connections, placed Stop button next to Play Data button for logical grouping of playback controls, removed Stop button from Global Settings drawer header, visualizer now appears at bottom as final output display after patch connections
- redesigned playback controls layout - made Play Data button larger (pa3 instead of pa2, f4 font size, 18px play icon), moved ITEM counter next to Play button instead of visualizer for better visibility, removed FREQ label (frequency info not needed during playback), simplified item display to "N / TOTAL" format without loop emoji, visualizer now takes full width without side labels for cleaner look
- fixed visualizer container overflow - added explicit width: 100% and overflow: hidden to visualizer container, added min-width: 0 to canvas to fix flexbox shrinking issue, set fixed width (80px) with flex-shrink: 0 on ITEM/FREQ labels to prevent expansion, ensures visualizer and labels stay within container bounds without stretching
- created four Tachyons-based wireframe layouts for exploring different UI approaches - wireframe-split-horizontal.html (classic two-column with JSON input left, controls right), wireframe-three-column.html (source ‚Üí mapping ‚Üí output pipeline view), wireframe-dashboard.html (modern card-based grid with stats and quick actions), wireframe-vertical-flow.html (step-by-step workflow with progress indicator), all use pure Tachyons utility classes for rapid layout prototyping
- restructured UI layout for focus on patch view - moved patch view to full width (100%), relocated global settings to collapsible drawer at top with expand/collapse toggle (‚ñº), moved Stop button to drawer header next to Global Settings title, moved Randomize Patch button into patch view header (top right), removed Smart Mapping button (auto-applies on load), drawer opens/closes with smooth animation, compact header keeps playback controls visible while editing, drawer content hidden by default to maximize patch view space
- optimized visualizer for ultra-low latency and maximum visual reactivity - reduced FFT size from 2048 to 256 for 8x faster processing, removed smoothing (smoothingTimeConstant=0) for instant response to audio changes, increased canvas height from 40px to 60px for more visual amplitude, added 1.5x amplification multiplier to make peaks more dramatic, zoomed in to show only first 60% of frequency spectrum (where musical content lives), eliminated high frequency noise display, result is hyper-reactive visualization that responds instantly to every data change
- switched visualizer back to frequency spectrum line graph for more dynamic movement - reverted from time-domain waveform (static for synthesized tones) to frequency spectrum (getByteFrequencyData) which shows peaks at specific frequencies and harmonics, much more visually reactive to changing audio parameters, smooth black line on white background without grid for cleaner look, line animates dramatically as frequency/filter/effects change with data values
- fixed critical bug where scaling curves weren't being applied to audio parameters - added curve transformation switch statement in getParamValue (exponential=x¬≤, cubic=x¬≥, logarithmic=log‚ÇÅ‚ÇÄ, inverse=1-x), parameters were only using linear scaling before which made cubic/exponential curves ineffective, now all curve types properly transform normalized values before mapping to audio ranges, explains why visualized values didn't match audio output
- improved parameter value logging - logs every 5th note (instead of just first) showing both calculated parameter values and raw data values, added startup logging showing all active mappings with their data paths/ranges/curves for debugging, helps verify that data changes are actually affecting audio parameters
- fixed analog delay stability issues - simplified smart mapping to only map delayTime (not feedback/mix) for stability, added null checks for all effect nodes before updating, added error handling with try/catch for delay ramping, increased minimum threshold for pitch shifting (0.005s) to prevent excessive ramping, added cancelScheduledValues to prevent parameter conflicts, constrained delay time range to 100-600ms for more predictable behavior
- implemented analog-style delay with pitch shifting when data values change - delay time now updates globally with smooth 50ms ramping that creates tape-style pitch bends when values change (mimics analog tape delay behavior), smart mapping prioritizes delayTime parameter to add richness, delay feedback and mix also update globally with smooth transitions, added console logging for analog pitch shift events
- fixed bug where reverbDecay and noteSpacing parameters weren't responding to mapped data values - added missing getParamValue() calls for these parameters in audioParams calculation, updated noteSpacing to use mapped values instead of only speed slider, improved console logging to show all 13 audio parameters on first note for debugging, now all effect parameters properly update with data changes
- added intelligent "Smart Mapping" algorithm for consistently interesting sonification - analyzes data variance, uniqueness, and range to calculate interest score for each numeric field, automatically maps most interesting data to perceptually important parameters (frequency, duration, noteSpacing), applies appropriate scaling curves based on variance (cubic for tiny differences, exponential for low variance, logarithmic for extremes), sets musically appropriate ranges (pentatonic scale for frequency 261-880Hz, 100-600ms duration), prioritizes high-impact parameters over subtle effects
- added pitch quantization with musical scale selection - new checkbox and dropdown in Global Settings snap all frequencies to selected scale (Pentatonic, Major, Minor, Dorian, Mixolydian, or Chromatic), ensures consonant melodic output instead of random microtonal frequencies, uses MIDI note conversion for accurate pitch snapping, enabled by default with pentatonic scale for immediate musicality
- added CSV parsing support to json-mapper-v2.html - auto-detects CSV vs JSON format based on content structure, uses d3.csvParse with automatic type inference (d3.autoType) to convert strings to numbers/dates, updates all UI labels to reflect "JSON/CSV" support, allows pasting spreadsheet data directly into editor for instant sonification

## 2025-11-10
- created distinct section boxes for settings and visualization - Global Settings and Patch View now in separate light gray boxes (#f5f5f5) with borders, moved Play Data and Randomize Patch buttons outside boxes above both sections, removed fixed bottom bar (visualizer now inline in Patch View), removed "Clear All Connections" button, visualizer bar appears under Patch View heading with Stop button and playback info inline
- swapped column layout - global settings now on left (1/3 width), patch view visualization on right (2/3 width), commented out Node/Form toggle, changed header to "Patch View" (f5), removed instruction text, made both headings same size (f5)
- fixed effects not responding to data values - corrected parameter scaling to calculate actual data min/max ranges before playback (was incorrectly using output ranges as data ranges), now properly scales from real data values to audio parameter ranges, added console logging to verify effect values on first note, delay/reverb/filter now change dynamically with mapped data
- reorganized layout into side-by-side columns - patch visualization (2/3 width) on left, global settings (1/3 width) on right in 2-column grid, condensed waveform/filter labels, shortened text descriptions, settings panel shows all controls compactly
- made patch visualization ultra-compact and centered - removed all node borders (borderless design), reduced node size to 80√ó24px (was 100√ó32), reduced spacing to 35px (was 50px), shrunk value text to 8px (was 10px), shrunk label text to 11px (was 12px), smaller ports (4px radius), light gray background section
- improved patch visualization section styling - added light gray background (#f5f5f5) to patch configuration area, removed "2." numbering from header for cleaner look, removed success status message ("‚úì Ready!"), made SVG height dynamic based on node count to prevent vertical cutoff (calculates 30px padding + nodes √ó 35px spacing)
- redesigned data selection UI - template dropdown now primary interface with "Browse Custom JSON" button to reveal textarea on demand, "View Data Table" button opens modal overlay instead of inline display, cleaner default view without visible code editor
- simplified patch visualization to fixed layout - removed node dragging, removed pan/zoom controls, removed border and set transparent background, eliminated "Reset View" and "Auto Layout" buttons, static clean presentation focuses on connections only
- converted to single-page layout - removed tab navigation in favor of continuous scrollable sections (1. Load Data, 2. Patch Configuration), eliminated tab switching complexity, all content visible on one page with clear visual separation via borders and headers
- added master pitch transpose slider to global settings - range of ¬±24 semitones (2 octaves up/down), applies to all frequencies in real-time during playback using exponential pitch scaling (frequency √ó 2^(semitones/12)), display shows transposed frequency value in bottom bar, allows exploring data in different pitch registers
- fixed visualization connections not showing and added dynamic re-parsing - nodes array now resets on each visualization update to handle data changes, added input event listener with 1-second debounce for auto-parsing on textarea edits, improved console logging to debug connection drawing, connections now properly draw after data changes
- added smart JSON structure detection - automatically handles nested objects (converts to key-value arrays), detects nested arrays and extracts them, converts single objects with key-value pairs (like exchange rates) to array of items, fixes "only 1 item" issue with API response JSONs, added exchange rates template (20 currencies)
- removed volume as mappable parameter for safety - eliminated volume from audio parameter list to prevent dangerous loudness spikes, set fixed safe volume at 0.2 (20%), prevents ear damage from extreme data values being mapped to amplitude
- fixed duplicate variable declaration preventing script execution - removed duplicate delayNode/reverbNode declarations (were declared twice at lines 885 and 1558), kept single declaration in state section, resolved "Identifier already declared" syntax error
- fixed initialization bugs preventing page load - added comprehensive safety checks to randomizeMappings/randomizeRanges functions (check for element existence before accessing), improved auto-load timing with proper setTimeout delay, added console logging for debugging, fixed template selector to properly set value on load, added null checks throughout to prevent crashes
- implemented full Web Audio effects chain in playback - added delay with feedback loop, convolution reverb, biquad filter, stereo panner, and ADSR envelope, all parameters now properly mapped and applied during playback, fixed delay/reverb not working by initializing global effect nodes and connecting full audio graph
- added Adaptive Range Normalization (on by default) - auto-analyzes variance of each numeric path using coefficient of variation, automatically applies cubic curve to low-variance data (e.g., lat/lon), exponential to moderate variance, logarithmic to extreme ranges, makes any dataset sonically interesting without manual tweaking
- added Rhythmic Quantization toggle - snaps note spacing to musical grid (125ms, 250ms, 500ms, 1000ms, etc) at 120 BPM, creates rhythmically coherent patterns instead of arbitrary timing, checkbox in Global Settings section
- simplified JSON input with auto-parse and template system - removed drag-drop UI in favor of clean "Load Dataset" dropdown with 5 templates (Housing, Weather, Stocks, Health, Social Media), auto-parses on template selection or paste, removed Parse Data button (parsing happens automatically), default template loads and parses on page load for instant ready state
- added real-time value display and visual feedback to node view - nodes show current data/audio values below labels during playback, active nodes highlight green with thicker borders, active connections pulse green, all values update in sync with audio playback, nodes clear to '--' when stopped
- added zoom and pan navigation to node view - implemented D3 zoom behavior (scroll to zoom 30%-300%, drag background to pan), zoom level indicator shows current scale percentage, Reset View button smoothly transitions back to 100% zoom, disabled double-click zoom for cleaner UX
- optimized node layout for space efficiency - reduced node spacing from 70px to 50px, shrunk node dimensions from 140x40 to 100x32, positioned data and audio columns closer together (330px apart instead of full width), compact layout fits more nodes in viewport
- implemented interactive node-based patching interface with D3.js in json-mapper-v2.html - draggable rectangular nodes (data sources on left, audio params on right), click-to-connect workflow (click output port on data node then input port on audio param), connection editing modal with min/max/curve controls, hover states turn blue, selected nodes highlighted, connections are curved paths that can be clicked to edit or delete
- added view toggle between Node View and Form View in Patch Configuration tab - segmented button control switches between interactive node-based interface and traditional form-based controls, both views sync with same underlying mappings data structure, allows comparison of interaction paradigms
- created NODE_BASED_INTERFACE_GUIDE.md with comprehensive guide for implementing node-based patching - covers four approaches (React Flow, D3.js, Svelte Flow, Canvas/WebGL), provides code examples, mockups of brutalist node interface, recommends D3 enhancement as incremental path forward, includes detailed implementation plan with drag-drop nodes and click-to-connect functionality
- removed Visualization tab and consolidated into Patch Configuration - merged D3 patch viz and speed controls into Patch Configuration tab, simplified to two-tab interface (JSON and Patch Configuration), moved visualization above parameter controls for better workflow
- added pause/resume functionality to Play Data button - button toggles between play (‚ñ∂), pause (‚ùö‚ùö), and resume states, paused state freezes playback at current position without stopping the loop, resume continues from paused point
- repositioned playback labels and reduced visualizer height - ITEM and FREQ labels now appear to the right of visualizer canvas, reduced visualizer from 60px to 40px height to prevent affecting button height in fixed bottom bar
- removed loop mode dropdown - simplified to always loop by default with loop indicator (üîÅ) in ITEM display, removed "play once" option for cleaner interface
- added labeled playback displays in bottom bar - created separate ITEM and FREQ labels with larger value displays (14px bold), labels show/hide with visualizer during playback, replaced single playbackInfo span with structured labeled sections for better readability
- added loop mode dropdown in json-mapper-v2.html - replaced loop emoji with dropdown selector offering "Loop playback" (default) and "Play once" options, playback respects selected mode, loop indicator (üîÅ) only shows when looping, fixed Play Data button size with min-width to prevent wrapping during playback state changes
- hooked up audio playback and visualizer in json-mapper-v2.html - added Parse Data button (secondary) under JSON textarea, Play Data button in fixed bar triggers actual Web Audio sonification, frequency bar visualizer (white bars on black) appears in bottom bar during playback, Stop button shows when playing, real-time playback info shows current item and frequency
- made Play Data button fixed at bottom of screen in json-mapper-v2.html - button now sticks to bottom with white background and black top border, always visible regardless of scroll position, visualizer canvas takes remaining space in fixed bar, content has bottom padding to prevent overlap
- created json-mapper-v2.html with tabbed interface - three-tab design (JSON, Patch Configuration, Visualization) with clean tab navigation, JSON tab shows large syntax-highlighted textarea with default data pre-loaded and tabular data preview below, Patch Configuration tab contains all mapping controls in organized layout, Visualization tab houses playback controls and patch diagram
- restructured UI with Play as primary CTA in json-mapper.html - moved Play button to top with bold black styling next to Parse JSON (secondary white button), added success status message showing parse count inline, converted detected paths to compact table format under JSON input with Path/Type/Sample columns, reorganized sections with better hierarchy
- enabled auto-randomization of mappings on JSON parse - clicking "Parse JSON" now automatically randomizes parameter mappings and updates patch visualization, providing instant sonification starting point
- added D3.js patch visualization showing data-to-audio mappings - displays active connections between JSON paths (left) and audio parameters (right) with curved lines, updates in real-time when mappings change, shows "Map parameters to see connections" placeholder when no mappings active
- fixed Web Audio API crash from non-finite values - added ensureFinite validation function that sanitizes all audio parameters before passing to Web Audio API, added comprehensive safety checks in scaleValue function to prevent NaN/Infinity, added clamping for pan (-1 to 1), delay feedback (0-0.99), and wet/dry mixes (0-1)
- added scaling curve options (linear, exponential, cubic, logarithmic, inverse) for each audio parameter - allows amplification of subtle differences in data like lat/lon coordinates (-76.621 vs -76.622) by applying mathematical transformations to normalized values, creating more dramatic sonic variation from small numeric ranges
- fixed playback bug where only first note would play after noteSpacing introduction - added safety checks for missing mappings, ensured noteSpacing exists before accessing path property, enforced minimum 10ms spacing to prevent browser overload
- created housing-sample.json with 20 Baltimore building permit records extracted from 265k+ record dataset for testing sonification - includes OBJECTID, Cost, Council_District, IsPermitModification, latitude, longitude fields
- added HOUSING_DATA_GUIDE.md documenting available numeric fields in GeoJSON data, suggesting sonification mappings (cost‚Üífrequency, district‚Üípan, lat/long‚Üífilter/reverb), and providing three complete sonification configuration ideas
- added note spacing parameter for dynamic rhythmic control - time between notes can now be mapped to data values (50-2000ms range), allowing data to create variable tempo patterns and rhythmic variation beyond the global speed slider
- integrated Tachyons CSS framework throughout interface for functional styling - replaced custom CSS with utility classes, applied light gray backgrounds (bg-black-05) to parameter containers, removed borders for cleaner aesthetic while maintaining IBM Plex Mono typography
- organized mapping controls into 2-column grid layout with IBM Plex Mono typography for improved legibility - each parameter gets its own box with structured rows for path/fixed/min/max controls
- added parameter randomization system with three modes: randomize mappings (assigns random JSON paths to audio params with waveform/filter selection), randomize ranges (varies min/max bounds for scaling), and randomize all (both at once) for quick exploration of different sonification configurations
- expanded audio parameters from 3 to 14 controllable dimensions: frequency, duration, volume, note spacing (tempo), stereo pan, lowpass/highpass/bandpass/notch filter with frequency and resonance controls, delay with time/feedback/mix, convolution reverb with decay/mix, and ADSR envelope with attack/release times
- added waveform selector (sine, square, sawtooth, triangle) and filter type selector (lowpass, highpass, bandpass, notch) for timbral control
- implemented full Web Audio API effects chain: oscillator ‚Üí biquad filter ‚Üí stereo panner ‚Üí gain envelope ‚Üí delay with feedback ‚Üí convolution reverb, all with real-time parameter control
- created json-mapper.html prototype for generic JSON sonification - raw unstyled HTML interface that accepts any JSON structure, auto-detects numeric and string paths, allows user to map any numeric path to audio parameters, uses pure Web Audio API with no dependencies, includes range scaling and playback speed control

## 2025-11-09
- created p5.js live coding terminal version with fullscreen generative visuals - classic green-on-black CRT aesthetic with scanlines, expanding particle system triggered by data values, waveform visualization, keyboard controls (SPACE=pause, R=restart, arrows=tempo), terminal text overlay showing component info in real-time
- reduced dissonance by simplifying chord generation to only consonant intervals (root, major 3rd, perfect 5th, octave), removed 7th chords that were creating tension
- lowered vibrato depth from 30% to 8% max for subtler modulation that doesn't clash
- reduced delay feedback from 93% to 65% and wet mix from 40% to 35% to prevent excessive buildup of dissonant echoes
- added smooth ramping to filter and vibrato changes to avoid abrupt timbral shifts
- removed balance and depth meta-nodes from visualization for cleaner data flow diagram showing only direct category-to-audio mappings
- added three new data-to-audio mappings: token diversity (total unique tokens across all categories) controls filter brightness/cutoff frequency for timbral complexity, category balance (how imbalanced vs evenly distributed the refs are) controls vibrato depth where imbalanced components get wobble, path depth (folder nesting level) controls reverb room size where deeper paths create cathedral-like spaces
- expanded visualization to show new derived data sources (token diversity, category balance, path depth) as middle-layer nodes that flow to audio parameters (brightness, vibrato, room size)
- added dimming for inactive/null values in visualization - nodes and connections fade to gray when not in use, making it easy to focus on only the active sound parameters being generated at each moment
- added D3.js node-based visualization showing real-time data-to-audio parameter flow - left side shows data inputs (color/typography/spacing/other refs), right side shows audio outputs (root/3rd/5th/7th, pan, delay), connections highlight and thicken based on current component values
- inverted color scheme to white background with black text for better readability while maintaining brutalist aesthetic
- redesigned interface with minimal brutalist aesthetic using IBM Plex Mono font - black background, white borders, tight spacing for raw data-focused presentation
- increased delay feedback to 93% for near-infinite echo buildup across the entire composition
- added analog vs digital delay mode toggle - analog mode creates tape-style pitch-shifting when delay time changes, digital mode is clean
- implemented chord generation system where typography/spacing/other refs add harmonic intervals (3rd/5th/7th/octave) to root note
- switched to D Mixolydian scale for modal jazz character with characteristic flat 7th
- added tempo slider (50-3000ms) with real-time adjustment during playback
- improved volume normalization with cube-root compression for consistent loudness across all components
- mapped typography refs to delay time creating analog tape speed effects that pitch-shift the entire delay buffer
- shifted pitch range up one octave for brighter, more present sound
- mapped spacing refs to stereo panning for spatial movement
- mapped other refs to reverb wetness for ambient depth
- created multi-dimensional sonification mapping design system metrics to pitch/volume/pan/delay/reverb/chords
- initialized git repository and created brutalist-ui branch
- built initial HTML/Tone.js prototype for translating metrics.json component data into sound

